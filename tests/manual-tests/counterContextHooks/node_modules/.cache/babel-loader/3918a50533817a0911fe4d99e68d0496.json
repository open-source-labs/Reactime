{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar env = require('exenv');\n\nvar PropTypes = require('prop-types');\n\nvar React = require('react');\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n/**\n * The current implementation was chosen by performance and compatibility reasons, feel free to play\n * with benchmarks and submit PR with faster alternative. Each method contains links to benchmarks.\n */\n\n\nvar EventSet = /*#__PURE__*/function () {\n  /**\n   * @see https://jsperf.com/suir-eventset-constructor\n   */\n  function EventSet(eventHandlers) {\n    _classCallCheck(this, EventSet);\n\n    _defineProperty(this, \"handlers\", void 0);\n\n    this.handlers = eventHandlers.slice(0);\n  }\n  /**\n   * @see https://jsperf.com/suir-eventset-addhandlers\n   */\n\n\n  _createClass(EventSet, [{\n    key: \"addHandlers\",\n    value: function addHandlers(additionalHandlers) {\n      var newHandlers = this.handlers.slice(0);\n      var length = additionalHandlers.length; // Heads up!\n      // Previously we use Set there, it granted uniqueness of handlers, now dispatchEvent() is\n      // responsible for this.\n\n      for (var i = 0; i < length; i += 1) {\n        newHandlers.push(additionalHandlers[i]);\n      }\n\n      return new EventSet(newHandlers);\n    }\n    /**\n     * @see https://jsperf.com/suir-eventset-dispatchsingle\n     * @see https://jsperf.com/suir-eventset-dispatchmultiple2\n     */\n\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event, dispatchAll) {\n      var count = this.handlers.length - 1;\n\n      if (!dispatchAll) {\n        // Heads up!\n        // We don't use .pop() there because it will mutate the array.\n        var recentHandler = this.handlers[count];\n        recentHandler(event);\n        return;\n      }\n\n      for (var i = count; i >= 0; i -= 1) {\n        if (!this.handlers[i].called) {\n          this.handlers[i].called = true;\n          this.handlers[i](event);\n        }\n      }\n\n      for (var _i = count; _i >= 0; _i -= 1) {\n        this.handlers[_i].called = false;\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.length > 0;\n    }\n    /**\n     * @see https://jsperf.com/suir-eventset-removehandlers\n     */\n\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(removalHandlers) {\n      var newHandlers = [];\n      var length = this.handlers.length;\n\n      for (var i = 0; i < length; i += 1) {\n        var handler = this.handlers[i];\n\n        if (removalHandlers.indexOf(handler) === -1) {\n          newHandlers.push(handler);\n        }\n      }\n\n      return new EventSet(newHandlers);\n    }\n  }]);\n\n  return EventSet;\n}();\n/**\n * An IE11-compatible function.\n *\n * @see https://jsperf.com/suir-clone-map\n */\n\n\nfunction cloneMap(map) {\n  var newMap = new Map();\n  map.forEach(function (value, key) {\n    newMap.set(key, value);\n  });\n  return newMap;\n}\n\nfunction normalizeHandlers(handlers) {\n  return Array.isArray(handlers) ? handlers : [handlers];\n}\n/**\n * Asserts that the passed value is React.RefObject\n *\n * @see https://github.com/facebook/react/blob/v16.8.2/packages/react-reconciler/src/ReactFiberCommitWork.js#L665\n */\n\n\nvar isRefObject = function isRefObject(ref // eslint-disable-next-line\n) {\n  return ref !== null && _typeof(ref) === 'object' && ref.hasOwnProperty('current');\n};\n/**\n * Normalizes `target` for EventStack, because `target` can be passed as `boolean` or `string`.\n *\n * @see https://jsperf.com/suir-normalize-target\n */\n\n\nfunction normalizeTarget(target) {\n  if (target === 'document') return document;\n  if (target === 'window') return window;\n  if (isRefObject(target)) return target.current || document;\n  return target || document;\n}\n\nvar EventPool = /*#__PURE__*/function () {\n  function EventPool(poolName, handlerSets) {\n    _classCallCheck(this, EventPool);\n\n    _defineProperty(this, \"handlerSets\", void 0);\n\n    _defineProperty(this, \"poolName\", void 0);\n\n    this.handlerSets = handlerSets;\n    this.poolName = poolName;\n  }\n\n  _createClass(EventPool, [{\n    key: \"addHandlers\",\n    value: function addHandlers(eventType, eventHandlers) {\n      var handlerSets = cloneMap(this.handlerSets);\n\n      if (handlerSets.has(eventType)) {\n        var eventSet = handlerSets.get(eventType);\n        handlerSets.set(eventType, eventSet.addHandlers(eventHandlers));\n      } else {\n        handlerSets.set(eventType, new EventSet(eventHandlers));\n      }\n\n      return new EventPool(this.poolName, handlerSets);\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(eventType, event) {\n      var handlerSet = this.handlerSets.get(eventType);\n      var shouldDispatchAll = this.poolName === 'default';\n\n      if (handlerSet) {\n        handlerSet.dispatchEvent(event, shouldDispatchAll);\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers(eventType) {\n      if (!eventType) {\n        return this.handlerSets.size > 0;\n      }\n\n      var eventSet = this.handlerSets.get(eventType);\n\n      if (eventSet) {\n        return eventSet.hasHandlers();\n      }\n\n      return false;\n    }\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(eventType, eventHandlers) {\n      var handlerSets = cloneMap(this.handlerSets);\n\n      if (!handlerSets.has(eventType)) {\n        return new EventPool(this.poolName, handlerSets);\n      }\n\n      var currentSet = handlerSets.get(eventType);\n      var nextSet = currentSet.removeHandlers(eventHandlers);\n\n      if (nextSet.hasHandlers()) {\n        handlerSets.set(eventType, nextSet);\n      } else {\n        handlerSets.delete(eventType);\n      }\n\n      return new EventPool(this.poolName, handlerSets);\n    }\n  }]);\n\n  return EventPool;\n}();\n\n_defineProperty(EventPool, \"createByType\", function (poolName, eventType, eventHandlers) {\n  var handlerSets = new Map();\n  handlerSets.set(eventType, new EventSet(eventHandlers));\n  return new EventPool(poolName, handlerSets);\n});\n\nvar EventTarget = /*#__PURE__*/function () {\n  function EventTarget(target) {\n    var _this = this;\n\n    _classCallCheck(this, EventTarget);\n\n    _defineProperty(this, \"handlers\", new Map());\n\n    _defineProperty(this, \"pools\", new Map());\n\n    _defineProperty(this, \"target\", void 0);\n\n    _defineProperty(this, \"createEmitter\", function (eventType) {\n      return function (event) {\n        _this.pools.forEach(function (pool) {\n          pool.dispatchEvent(eventType, event);\n        });\n      };\n    });\n\n    this.target = target;\n  }\n\n  _createClass(EventTarget, [{\n    key: \"addHandlers\",\n    value: function addHandlers(poolName, eventType, eventHandlers) {\n      if (this.pools.has(poolName)) {\n        var eventPool = this.pools.get(poolName);\n        this.pools.set(poolName, eventPool.addHandlers(eventType, eventHandlers));\n      } else {\n        this.pools.set(poolName, EventPool.createByType(poolName, eventType, eventHandlers));\n      }\n\n      if (!this.handlers.has(eventType)) {\n        this.addTargetHandler(eventType);\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.size > 0;\n    }\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(poolName, eventType, eventHandlers) {\n      if (!this.pools.has(poolName)) {\n        return;\n      }\n\n      var pool = this.pools.get(poolName);\n      var newPool = pool.removeHandlers(eventType, eventHandlers);\n\n      if (newPool.hasHandlers()) {\n        this.pools.set(poolName, newPool);\n      } else {\n        this.pools.delete(poolName);\n      }\n\n      var hasHandlers = false;\n      this.pools.forEach(function (pool) {\n        return hasHandlers = hasHandlers || pool.hasHandlers(eventType);\n      });\n\n      if (!hasHandlers) {\n        this.removeTargetHandler(eventType);\n      }\n    }\n  }, {\n    key: \"addTargetHandler\",\n    value: function addTargetHandler(eventType) {\n      var handler = this.createEmitter(eventType);\n      this.handlers.set(eventType, handler);\n      this.target.addEventListener(eventType, handler, true);\n    }\n  }, {\n    key: \"removeTargetHandler\",\n    value: function removeTargetHandler(eventType) {\n      if (this.handlers.has(eventType)) {\n        this.target.removeEventListener(eventType, this.handlers.get(eventType), true);\n        this.handlers.delete(eventType);\n      }\n    }\n  }]);\n\n  return EventTarget;\n}();\n\nvar EventStack = /*#__PURE__*/function () {\n  function EventStack() {\n    var _this = this;\n\n    _classCallCheck(this, EventStack);\n\n    _defineProperty(this, \"targets\", new Map());\n\n    _defineProperty(this, \"getTarget\", function (target) {\n      var autoCreate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var normalized = normalizeTarget(target);\n\n      if (_this.targets.has(normalized)) {\n        return _this.targets.get(normalized);\n      }\n\n      if (!autoCreate) return null;\n      var eventTarget = new EventTarget(normalized);\n\n      _this.targets.set(normalized, eventTarget);\n\n      return eventTarget;\n    });\n\n    _defineProperty(this, \"removeTarget\", function (target) {\n      _this.targets.delete(normalizeTarget(target));\n    });\n  }\n\n  _createClass(EventStack, [{\n    key: \"sub\",\n    value: function sub(eventName, eventHandlers) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!env.canUseDOM) return;\n      var _options$target = options.target,\n          target = _options$target === void 0 ? document : _options$target,\n          _options$pool = options.pool,\n          pool = _options$pool === void 0 ? 'default' : _options$pool;\n      var eventTarget = this.getTarget(target);\n      eventTarget.addHandlers(pool, eventName, normalizeHandlers(eventHandlers));\n    }\n  }, {\n    key: \"unsub\",\n    value: function unsub(eventName, eventHandlers) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!env.canUseDOM) return;\n      var _options$target2 = options.target,\n          target = _options$target2 === void 0 ? document : _options$target2,\n          _options$pool2 = options.pool,\n          pool = _options$pool2 === void 0 ? 'default' : _options$pool2;\n      var eventTarget = this.getTarget(target, false);\n\n      if (eventTarget) {\n        eventTarget.removeHandlers(pool, eventName, normalizeHandlers(eventHandlers));\n        if (!eventTarget.hasHandlers()) this.removeTarget(target);\n      }\n    }\n  }]);\n\n  return EventStack;\n}();\n\nvar instance = new EventStack();\n/**\n * This component exposes the EventStack API as public and provides a declarative way to manage it.\n */\n\nvar EventStack$1 = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(EventStack, _React$PureComponent);\n\n  function EventStack() {\n    _classCallCheck(this, EventStack);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(EventStack).apply(this, arguments));\n  }\n\n  _createClass(EventStack, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.subscribe(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      this.unsubscribe(prevProps);\n      this.subscribe(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe(this.props);\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(props) {\n      var name = props.name,\n          on = props.on,\n          pool = props.pool,\n          target = props.target;\n      instance.sub(name, on, {\n        pool: pool,\n        target: target\n      });\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(props) {\n      var name = props.name,\n          on = props.on,\n          pool = props.pool,\n          target = props.target;\n      instance.unsub(name, on, {\n        pool: pool,\n        target: target\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return EventStack;\n}(React.PureComponent);\n\n_defineProperty(EventStack$1, \"defaultProps\", {\n  pool: 'default',\n  target: 'document'\n});\n\nEventStack$1.propTypes = {\n  /** An event name on which we will subscribe. */\n  name: PropTypes.string.isRequired,\n\n  /** An event handler or array of event handlers. */\n  on: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]).isRequired,\n\n  /** A name of pool. */\n  pool: PropTypes.string,\n\n  /** A DOM element on which we will subscribe. */\n  target: PropTypes.oneOfType([PropTypes.oneOf(['document', 'window']), // Heads up!\n  // This condition for SSR safety.\n  PropTypes.instanceOf(env.canUseDOM ? HTMLElement : Object), PropTypes.shape({\n    current: PropTypes.object\n  })])\n};\nexports.instance = instance;\nexports.default = EventStack$1;","map":{"version":3,"sources":["/Users/gabrielajardimaquino/Desktop/ReactimeONTEST/reactime/tests/manual-tests/counterContextHooks/node_modules/@semantic-ui-react/event-stack/lib/cjs/event-stack.development.js"],"names":["Object","defineProperty","exports","value","env","require","PropTypes","React","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_defineProperty","_inherits","subClass","superClass","create","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","call","EventSet","eventHandlers","handlers","slice","addHandlers","additionalHandlers","newHandlers","push","dispatchEvent","event","dispatchAll","count","recentHandler","called","_i","hasHandlers","removeHandlers","removalHandlers","handler","indexOf","cloneMap","map","newMap","Map","forEach","set","normalizeHandlers","Array","isArray","isRefObject","ref","hasOwnProperty","normalizeTarget","document","window","current","EventPool","poolName","handlerSets","eventType","has","eventSet","get","handlerSet","shouldDispatchAll","size","currentSet","nextSet","delete","EventTarget","_this","pools","pool","eventPool","createByType","addTargetHandler","newPool","removeTargetHandler","createEmitter","addEventListener","removeEventListener","EventStack","autoCreate","arguments","undefined","normalized","targets","eventTarget","sub","eventName","options","canUseDOM","_options$target","_options$pool","getTarget","unsub","_options$target2","_options$pool2","removeTarget","EventStack$1","_React$PureComponent","apply","componentDidMount","subscribe","componentDidUpdate","prevProps","unsubscribe","componentWillUnmount","name","on","render","PureComponent","propTypes","string","isRequired","oneOfType","func","arrayOf","oneOf","instanceOf","HTMLElement","shape","object","default"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar env = require('exenv');\nvar PropTypes = require('prop-types');\nvar React = require('react');\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\n/**\n * The current implementation was chosen by performance and compatibility reasons, feel free to play\n * with benchmarks and submit PR with faster alternative. Each method contains links to benchmarks.\n */\nvar EventSet =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @see https://jsperf.com/suir-eventset-constructor\n   */\n  function EventSet(eventHandlers) {\n    _classCallCheck(this, EventSet);\n\n    _defineProperty(this, \"handlers\", void 0);\n\n    this.handlers = eventHandlers.slice(0);\n  }\n  /**\n   * @see https://jsperf.com/suir-eventset-addhandlers\n   */\n\n\n  _createClass(EventSet, [{\n    key: \"addHandlers\",\n    value: function addHandlers(additionalHandlers) {\n      var newHandlers = this.handlers.slice(0);\n      var length = additionalHandlers.length; // Heads up!\n      // Previously we use Set there, it granted uniqueness of handlers, now dispatchEvent() is\n      // responsible for this.\n\n      for (var i = 0; i < length; i += 1) {\n        newHandlers.push(additionalHandlers[i]);\n      }\n\n      return new EventSet(newHandlers);\n    }\n    /**\n     * @see https://jsperf.com/suir-eventset-dispatchsingle\n     * @see https://jsperf.com/suir-eventset-dispatchmultiple2\n     */\n\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(event, dispatchAll) {\n      var count = this.handlers.length - 1;\n\n      if (!dispatchAll) {\n        // Heads up!\n        // We don't use .pop() there because it will mutate the array.\n        var recentHandler = this.handlers[count];\n        recentHandler(event);\n        return;\n      }\n\n      for (var i = count; i >= 0; i -= 1) {\n        if (!this.handlers[i].called) {\n          this.handlers[i].called = true;\n          this.handlers[i](event);\n        }\n      }\n\n      for (var _i = count; _i >= 0; _i -= 1) {\n        this.handlers[_i].called = false;\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.length > 0;\n    }\n    /**\n     * @see https://jsperf.com/suir-eventset-removehandlers\n     */\n\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(removalHandlers) {\n      var newHandlers = [];\n      var length = this.handlers.length;\n\n      for (var i = 0; i < length; i += 1) {\n        var handler = this.handlers[i];\n\n        if (removalHandlers.indexOf(handler) === -1) {\n          newHandlers.push(handler);\n        }\n      }\n\n      return new EventSet(newHandlers);\n    }\n  }]);\n\n  return EventSet;\n}();\n\n/**\n * An IE11-compatible function.\n *\n * @see https://jsperf.com/suir-clone-map\n */\nfunction cloneMap(map) {\n  var newMap = new Map();\n  map.forEach(function (value, key) {\n    newMap.set(key, value);\n  });\n  return newMap;\n}\nfunction normalizeHandlers(handlers) {\n  return Array.isArray(handlers) ? handlers : [handlers];\n}\n/**\n * Asserts that the passed value is React.RefObject\n *\n * @see https://github.com/facebook/react/blob/v16.8.2/packages/react-reconciler/src/ReactFiberCommitWork.js#L665\n */\n\nvar isRefObject = function isRefObject(ref // eslint-disable-next-line\n) {\n  return ref !== null && _typeof(ref) === 'object' && ref.hasOwnProperty('current');\n};\n/**\n * Normalizes `target` for EventStack, because `target` can be passed as `boolean` or `string`.\n *\n * @see https://jsperf.com/suir-normalize-target\n */\n\nfunction normalizeTarget(target) {\n  if (target === 'document') return document;\n  if (target === 'window') return window;\n  if (isRefObject(target)) return target.current || document;\n  return target || document;\n}\n\nvar EventPool =\n/*#__PURE__*/\nfunction () {\n  function EventPool(poolName, handlerSets) {\n    _classCallCheck(this, EventPool);\n\n    _defineProperty(this, \"handlerSets\", void 0);\n\n    _defineProperty(this, \"poolName\", void 0);\n\n    this.handlerSets = handlerSets;\n    this.poolName = poolName;\n  }\n\n  _createClass(EventPool, [{\n    key: \"addHandlers\",\n    value: function addHandlers(eventType, eventHandlers) {\n      var handlerSets = cloneMap(this.handlerSets);\n\n      if (handlerSets.has(eventType)) {\n        var eventSet = handlerSets.get(eventType);\n        handlerSets.set(eventType, eventSet.addHandlers(eventHandlers));\n      } else {\n        handlerSets.set(eventType, new EventSet(eventHandlers));\n      }\n\n      return new EventPool(this.poolName, handlerSets);\n    }\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(eventType, event) {\n      var handlerSet = this.handlerSets.get(eventType);\n      var shouldDispatchAll = this.poolName === 'default';\n\n      if (handlerSet) {\n        handlerSet.dispatchEvent(event, shouldDispatchAll);\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers(eventType) {\n      if (!eventType) {\n        return this.handlerSets.size > 0;\n      }\n\n      var eventSet = this.handlerSets.get(eventType);\n\n      if (eventSet) {\n        return eventSet.hasHandlers();\n      }\n\n      return false;\n    }\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(eventType, eventHandlers) {\n      var handlerSets = cloneMap(this.handlerSets);\n\n      if (!handlerSets.has(eventType)) {\n        return new EventPool(this.poolName, handlerSets);\n      }\n\n      var currentSet = handlerSets.get(eventType);\n      var nextSet = currentSet.removeHandlers(eventHandlers);\n\n      if (nextSet.hasHandlers()) {\n        handlerSets.set(eventType, nextSet);\n      } else {\n        handlerSets.delete(eventType);\n      }\n\n      return new EventPool(this.poolName, handlerSets);\n    }\n  }]);\n\n  return EventPool;\n}();\n\n_defineProperty(EventPool, \"createByType\", function (poolName, eventType, eventHandlers) {\n  var handlerSets = new Map();\n  handlerSets.set(eventType, new EventSet(eventHandlers));\n  return new EventPool(poolName, handlerSets);\n});\n\nvar EventTarget =\n/*#__PURE__*/\nfunction () {\n  function EventTarget(target) {\n    var _this = this;\n\n    _classCallCheck(this, EventTarget);\n\n    _defineProperty(this, \"handlers\", new Map());\n\n    _defineProperty(this, \"pools\", new Map());\n\n    _defineProperty(this, \"target\", void 0);\n\n    _defineProperty(this, \"createEmitter\", function (eventType) {\n      return function (event) {\n        _this.pools.forEach(function (pool) {\n          pool.dispatchEvent(eventType, event);\n        });\n      };\n    });\n\n    this.target = target;\n  }\n\n  _createClass(EventTarget, [{\n    key: \"addHandlers\",\n    value: function addHandlers(poolName, eventType, eventHandlers) {\n      if (this.pools.has(poolName)) {\n        var eventPool = this.pools.get(poolName);\n        this.pools.set(poolName, eventPool.addHandlers(eventType, eventHandlers));\n      } else {\n        this.pools.set(poolName, EventPool.createByType(poolName, eventType, eventHandlers));\n      }\n\n      if (!this.handlers.has(eventType)) {\n        this.addTargetHandler(eventType);\n      }\n    }\n  }, {\n    key: \"hasHandlers\",\n    value: function hasHandlers() {\n      return this.handlers.size > 0;\n    }\n  }, {\n    key: \"removeHandlers\",\n    value: function removeHandlers(poolName, eventType, eventHandlers) {\n      if (!this.pools.has(poolName)) {\n        return;\n      }\n\n      var pool = this.pools.get(poolName);\n      var newPool = pool.removeHandlers(eventType, eventHandlers);\n\n      if (newPool.hasHandlers()) {\n        this.pools.set(poolName, newPool);\n      } else {\n        this.pools.delete(poolName);\n      }\n\n      var hasHandlers = false;\n      this.pools.forEach(function (pool) {\n        return hasHandlers = hasHandlers || pool.hasHandlers(eventType);\n      });\n\n      if (!hasHandlers) {\n        this.removeTargetHandler(eventType);\n      }\n    }\n  }, {\n    key: \"addTargetHandler\",\n    value: function addTargetHandler(eventType) {\n      var handler = this.createEmitter(eventType);\n      this.handlers.set(eventType, handler);\n      this.target.addEventListener(eventType, handler, true);\n    }\n  }, {\n    key: \"removeTargetHandler\",\n    value: function removeTargetHandler(eventType) {\n      if (this.handlers.has(eventType)) {\n        this.target.removeEventListener(eventType, this.handlers.get(eventType), true);\n        this.handlers.delete(eventType);\n      }\n    }\n  }]);\n\n  return EventTarget;\n}();\n\nvar EventStack =\n/*#__PURE__*/\nfunction () {\n  function EventStack() {\n    var _this = this;\n\n    _classCallCheck(this, EventStack);\n\n    _defineProperty(this, \"targets\", new Map());\n\n    _defineProperty(this, \"getTarget\", function (target) {\n      var autoCreate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var normalized = normalizeTarget(target);\n\n      if (_this.targets.has(normalized)) {\n        return _this.targets.get(normalized);\n      }\n\n      if (!autoCreate) return null;\n      var eventTarget = new EventTarget(normalized);\n\n      _this.targets.set(normalized, eventTarget);\n\n      return eventTarget;\n    });\n\n    _defineProperty(this, \"removeTarget\", function (target) {\n      _this.targets.delete(normalizeTarget(target));\n    });\n  }\n\n  _createClass(EventStack, [{\n    key: \"sub\",\n    value: function sub(eventName, eventHandlers) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!env.canUseDOM) return;\n      var _options$target = options.target,\n          target = _options$target === void 0 ? document : _options$target,\n          _options$pool = options.pool,\n          pool = _options$pool === void 0 ? 'default' : _options$pool;\n      var eventTarget = this.getTarget(target);\n      eventTarget.addHandlers(pool, eventName, normalizeHandlers(eventHandlers));\n    }\n  }, {\n    key: \"unsub\",\n    value: function unsub(eventName, eventHandlers) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (!env.canUseDOM) return;\n      var _options$target2 = options.target,\n          target = _options$target2 === void 0 ? document : _options$target2,\n          _options$pool2 = options.pool,\n          pool = _options$pool2 === void 0 ? 'default' : _options$pool2;\n      var eventTarget = this.getTarget(target, false);\n\n      if (eventTarget) {\n        eventTarget.removeHandlers(pool, eventName, normalizeHandlers(eventHandlers));\n        if (!eventTarget.hasHandlers()) this.removeTarget(target);\n      }\n    }\n  }]);\n\n  return EventStack;\n}();\n\nvar instance = new EventStack();\n\n/**\n * This component exposes the EventStack API as public and provides a declarative way to manage it.\n */\nvar EventStack$1 =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(EventStack, _React$PureComponent);\n\n  function EventStack() {\n    _classCallCheck(this, EventStack);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(EventStack).apply(this, arguments));\n  }\n\n  _createClass(EventStack, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.subscribe(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      this.unsubscribe(prevProps);\n      this.subscribe(this.props);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe(this.props);\n    }\n  }, {\n    key: \"subscribe\",\n    value: function subscribe(props) {\n      var name = props.name,\n          on = props.on,\n          pool = props.pool,\n          target = props.target;\n      instance.sub(name, on, {\n        pool: pool,\n        target: target\n      });\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe(props) {\n      var name = props.name,\n          on = props.on,\n          pool = props.pool,\n          target = props.target;\n      instance.unsub(name, on, {\n        pool: pool,\n        target: target\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return EventStack;\n}(React.PureComponent);\n\n_defineProperty(EventStack$1, \"defaultProps\", {\n  pool: 'default',\n  target: 'document'\n});\nEventStack$1.propTypes = {\n  /** An event name on which we will subscribe. */\n  name: PropTypes.string.isRequired,\n\n  /** An event handler or array of event handlers. */\n  on: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.func)]).isRequired,\n\n  /** A name of pool. */\n  pool: PropTypes.string,\n\n  /** A DOM element on which we will subscribe. */\n  target: PropTypes.oneOfType([PropTypes.oneOf(['document', 'window']), // Heads up!\n  // This condition for SSR safety.\n  PropTypes.instanceOf(env.canUseDOM ? HTMLElement : Object), PropTypes.shape({\n    current: PropTypes.object\n  })])\n};\n\nexports.instance = instance;\nexports.default = EventStack$1;\n"]},"metadata":{},"sourceType":"script"}