"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

// Add Babel plugin
try {
  require.resolve("babel-plugin-styled-components");
} catch (e) {
  throw new Error("'babel-plugin-styled-components' is not installed which is needed by plugin 'gatsby-plugin-styled-components'");
}

exports.onCreateBabelConfig = function (_ref, pluginOptions) {
  var stage = _ref.stage,
      actions = _ref.actions;
  var ssr = stage === "build-html" || stage === "build-javascript";
  actions.setBabelPlugin({
    name: "babel-plugin-styled-components",
    stage: stage,
    options: (0, _extends2["default"])({}, pluginOptions, {
      ssr: ssr
    })
  });
};